<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>sql operations</title><!-- for google analytics -->
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QNNF19VZGH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QNNF19VZGH');
</script>

<!-- lambda icon, frail attempt -->
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%221em%22 font-size=%22100%22 color=%22red%22>Î»</text></svg>">
<!-- not-so-awesome awesome font -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="stylesheet" href="/main.css">
<!-- for dark mode -->
<script src="darkmode.js"></script>
<script src="main.js"></script>
<script src="https://unpkg.com/feather-icons"></script>
</head>
<body>
<div id="preamble" class="status">
<div class="navbar">
  <a href='/'>home</a>
  <a href='/blog.html'>blog</a>
  <a href='/search.html'>search</a>
  <a href='/about.html'>about</a>
  <div id="darkModeToggle" onclick="toggleDarkMode()">
    &#9680; <!-- Circle with left half black -->
  </div>
</div>
<div class="toc">
  <span class="toc-title-container">
    <a class='feather' data-feather='menu'></a>
    <span class="toc-title">table of contents</span>
  </span>
  <div class="toc-list">
  </div>
</div><h1 class="main-title">sql operations</h1><span class="desc">a set of common [[blk:1702389696][sql]] operations</span><span class='date'>2023-12-12</span>
</div>
<div id="content" class="content">
<div id="outline-container-orgd1e093d" class="outline-2">
<h2 id="orgd1e093d">list databases</h2>
<div class="outline-text-2" id="text-orgd1e093d">
<div class="org-src-container" data-language="sql">
<pre class="src src-sql"><span style="color: #7c6f64;">-- </span><span style="color: #7c6f64;">show databases; -- for mysql</span>
\l <span style="color: #7c6f64;">-- </span><span style="color: #7c6f64;">for postgresql</span>
</pre>
</div>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">List of databases</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Name</td>
<td class="org-left">Owner</td>
<td class="org-left">Encoding</td>
<td class="org-left">Locale Provider</td>
<td class="org-left">Collate</td>
<td class="org-left">Ctype</td>
<td class="org-left">ICU Locale</td>
<td class="org-left">ICU Rules</td>
<td class="org-left">Access privileges</td>
</tr>

<tr>
<td class="org-left">mahmooz</td>
<td class="org-left">mahmooz</td>
<td class="org-left">UTF8</td>
<td class="org-left">libc</td>
<td class="org-left">en_US.UTF-8</td>
<td class="org-left">en_US.UTF-8</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">postgres</td>
<td class="org-left">postgres</td>
<td class="org-left">UTF8</td>
<td class="org-left">libc</td>
<td class="org-left">en_US.UTF-8</td>
<td class="org-left">en_US.UTF-8</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">template0</td>
<td class="org-left">postgres</td>
<td class="org-left">UTF8</td>
<td class="org-left">libc</td>
<td class="org-left">en_US.UTF-8</td>
<td class="org-left">en_US.UTF-8</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">=c/postgres</td>
</tr>

<tr>
<td class="org-left">postgres=CTc/postgres</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">template1</td>
<td class="org-left">postgres</td>
<td class="org-left">UTF8</td>
<td class="org-left">libc</td>
<td class="org-left">en_US.UTF-8</td>
<td class="org-left">en_US.UTF-8</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">=c/postgres</td>
</tr>

<tr>
<td class="org-left">postgres=CTc/postgres</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org1930596" class="outline-2">
<h2 id="org1930596">deleting a database</h2>
<div class="outline-text-2" id="text-org1930596">
<div class="org-src-container" data-language="sql">
<pre class="src src-sql"><span style="color: #fb4933;">drop</span> databsae &lt;dbname&gt;;
</pre>
</div>
</div>
</div>
<div id="outline-container-org9094952" class="outline-2">
<h2 id="org9094952">creating databases</h2>
<div class="outline-text-2" id="text-org9094952">
<div class="org-src-container" data-language="sql">
<pre class="src src-sql"><span style="color: #fb4933;">create</span> database &lt;dbname&gt;;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgea40be2" class="outline-2">
<h2 id="orgea40be2">describe database</h2>
<div class="outline-text-2" id="text-orgea40be2">
<div class="org-src-container" data-language="sql">
<pre class="src src-sql"><span style="color: #fb4933;">describe</span> sys;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd99f6c1" class="outline-2">
<h2 id="orgd99f6c1">schema</h2>
<div class="outline-text-2" id="text-orgd99f6c1">
<div test="test" class="fancy-block dummy" data-before="" data-after="&lt;p&gt;
(Ramez Elmasri, Shamkant B. Navathe, 2015 chapter 6.1.1 schema and catalog concepts in sql)&lt;/p&gt;
" id="def-inr-prod" data-id="def-inr-prod">
<p>
an example of creating a <a href="/schema.html">schema</a> (usually called a database), a schema called <code>COMPANY</code> owned by the user with authorization identifier <code>Jsmith</code>. note that each statement in SQL ends with a semicolon.
</p>
<div class="org-src-container" data-language="sql">
<pre class="src src-sql"><span style="color: #fb4933;">CREATE</span> <span style="color: #fb4933;">SCHEMA</span> COMPANY <span style="color: #fb4933;">AUTHORIZATION</span> <span style="color: #b8bb26;">'Jsmith'</span>;
</pre>
</div>

<p>
in general, not all users are authorized to create schemas and schema elements. the privilege to create schemas, tables, and other constructs must be explicitly granted to the relevant user accounts by the system administrator or <a href="/database_administrator.html">DBA</a>.
</p>

</div>
</div>
</div>
<div id="outline-container-orgb49af97" class="outline-2">
<h2 id="orgb49af97">create table</h2>
<div class="outline-text-2" id="text-orgb49af97">
<div test="test" class="fancy-block dummy" data-before="" data-after="&lt;p&gt;
(Ramez Elmasri, Shamkant B. Navathe, 2015 chapter 6.1.2 the create table command in sql)&lt;/p&gt;
" id="def-inr-prod" data-id="def-inr-prod">
<p>
the <code>CREATE TABLE</code> command is used to specify a new relation by giving it a name and specifying its attributes and initial constraints. the attributes are specified first, and each attribute is given a name, a data type to specify its domain of values, and possibly attribute constraints, such as <code>NOT NULL</code>. the key, entity integrity, and referential integrity constraints can be specified within the <code>CREATE TABLE</code> statement after the attributes are declared, or they can be added later using the <code>ALTER TABLE</code> command.
</p>

<p>
typically, the sql schema (usually called database) in which the relations are declared is implicitly specified in the environment in which the <code>CREATE TABLE</code> statements are executed. alternatively, we can explicitly attach the schema name to the relation name, separated by a period. for example, by writing
</p>
<div class="org-src-container" data-language="sql">
<pre class="src src-sql"><span style="color: #fb4933;">CREATE</span> <span style="color: #fb4933;">TABLE</span> <span style="color: #fabd2f;">COMPANY.EMPLOYEE</span>
</pre>
</div>

<p>
rather than
</p>
<div class="org-src-container" data-language="sql">
<pre class="src src-sql"><span style="color: #fb4933;">CREATE</span> <span style="color: #fb4933;">TABLE</span> <span style="color: #fabd2f;">EMPLOYEE</span>
</pre>
</div>

<p>
the relations declared through <code>CREATE TABLE</code> statements are called <i>base tables</i> (or base relations); this means that the table and its rows are actually created and stored as a file by the <a href="/database_management_system.html">dbms</a>.
</p>
<div class="org-src-container" data-language="sql">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>an example schema declaration</label><pre class="src src-sql" id="src-sql-example-1"><span style="color: #fb4933;">CREATE</span> <span style="color: #fb4933;">TABLE</span> <span style="color: #fabd2f;">EMPLOYEE</span>
 <span style="color: #458588;">(</span>Fname      <span style="color: #d3869b;">VARCHAR</span><span style="color: #b16286;">(</span>15<span style="color: #b16286;">)</span>   <span style="color: #fb4933;">NOT</span> <span style="color: #fb4933;">NULL</span>,
  Minit      <span style="color: #d3869b;">CHAR</span>,
  Lname      <span style="color: #d3869b;">VARCHAR</span><span style="color: #b16286;">(</span>15<span style="color: #b16286;">)</span>   <span style="color: #fb4933;">NOT</span> <span style="color: #fb4933;">NULL</span>,
  Ssn        <span style="color: #d3869b;">CHAR</span><span style="color: #b16286;">(</span>9<span style="color: #b16286;">)</span>       <span style="color: #fb4933;">NOT</span> <span style="color: #fb4933;">NULL</span>,
  Bdate      <span style="color: #d3869b;">DATE</span>,
  Address    <span style="color: #d3869b;">VARCHAR</span><span style="color: #b16286;">(</span>30<span style="color: #b16286;">)</span>,
  Sex        <span style="color: #d3869b;">CHAR</span>,
  Salary     <span style="color: #d3869b;">DECIMAL</span><span style="color: #b16286;">(</span>10,2<span style="color: #b16286;">)</span>,
  Super_ssn  <span style="color: #d3869b;">CHAR</span><span style="color: #b16286;">(</span>9<span style="color: #b16286;">)</span>,
  Dno        <span style="color: #d3869b;">INT</span>           <span style="color: #fb4933;">NOT</span> <span style="color: #fb4933;">NULL</span>,
 <span style="color: #fb4933;">PRIMARY</span> <span style="color: #fb4933;">KEY</span> <span style="color: #b16286;">(</span>Ssn<span style="color: #b16286;">)</span>, <span style="color: #7c6f64;">-- </span><span style="color: #7c6f64;">has continutation, unclosed</span>
<span style="color: #fb4933;">CREATE</span> <span style="color: #fb4933;">TABLE</span> <span style="color: #fabd2f;">DEPARTMENT</span>
 <span style="color: #b16286;">(</span>Dname          <span style="color: #d3869b;">VARCHAR</span><span style="color: #8ec07c;">(</span>15<span style="color: #8ec07c;">)</span> <span style="color: #fb4933;">NOT</span> <span style="color: #fb4933;">NULL</span>,
  Dnumber        <span style="color: #d3869b;">INT</span>         <span style="color: #fb4933;">NOT</span> <span style="color: #fb4933;">NULL</span>,
  Mgr_ssn        <span style="color: #d3869b;">CHAR</span><span style="color: #8ec07c;">(</span>9<span style="color: #8ec07c;">)</span>     <span style="color: #fb4933;">NOT</span> <span style="color: #fb4933;">NULL</span>,
  Mgr_start_date <span style="color: #d3869b;">DATE</span>,
  <span style="color: #fb4933;">PRIMARY</span> <span style="color: #fb4933;">KEY</span> <span style="color: #8ec07c;">(</span>Dnumber<span style="color: #8ec07c;">)</span>,
  <span style="color: #fb4933;">UNIQUE</span> <span style="color: #8ec07c;">(</span>Dname<span style="color: #8ec07c;">)</span>,
  <span style="color: #fb4933;">FOREIGN</span> <span style="color: #fb4933;">KEY</span> <span style="color: #8ec07c;">(</span>Mgr_ssn<span style="color: #8ec07c;">)</span> <span style="color: #fb4933;">REFERENCES</span> EMPLOYEE<span style="color: #8ec07c;">(</span>Ssn<span style="color: #8ec07c;">)</span> <span style="color: #b16286;">)</span>;
<span style="color: #fb4933;">CREATE</span> <span style="color: #fb4933;">TABLE</span> <span style="color: #fabd2f;">DEPT_LOCATIONS</span>
 <span style="color: #b16286;">(</span>Dnumber   <span style="color: #d3869b;">INT</span>         <span style="color: #fb4933;">NOT</span> <span style="color: #fb4933;">NULL</span>,
  Dlocation <span style="color: #d3869b;">VARCHAR</span><span style="color: #8ec07c;">(</span>15<span style="color: #8ec07c;">)</span> <span style="color: #fb4933;">NOT</span> <span style="color: #fb4933;">NULL</span>,
  <span style="color: #fb4933;">PRIMARY</span> <span style="color: #fb4933;">KEY</span> <span style="color: #8ec07c;">(</span>Dnumber, Dlocation<span style="color: #8ec07c;">)</span>,
  <span style="color: #fb4933;">FOREIGN</span> <span style="color: #fb4933;">KEY</span> <span style="color: #8ec07c;">(</span>Dnumber<span style="color: #8ec07c;">)</span> <span style="color: #fb4933;">REFERENCES</span> DEPARTMENT <span style="color: #8ec07c;">(</span>Dnumber<span style="color: #8ec07c;">)</span> <span style="color: #b16286;">)</span>;
<span style="color: #fb4933;">CREATE</span> <span style="color: #fb4933;">TABLE</span> <span style="color: #fabd2f;">PROJECT</span>
 <span style="color: #b16286;">(</span>Pname <span style="color: #d3869b;">VARCHAR</span><span style="color: #8ec07c;">(</span>15<span style="color: #8ec07c;">)</span>      <span style="color: #fb4933;">NOT</span> <span style="color: #fb4933;">NULL</span>,
  Pnumber   <span style="color: #d3869b;">INT</span>          <span style="color: #fb4933;">NOT</span> <span style="color: #fb4933;">NULL</span>,
  Plocation <span style="color: #d3869b;">VARCHAR</span><span style="color: #8ec07c;">(</span>15<span style="color: #8ec07c;">)</span>,
  Dnum      <span style="color: #d3869b;">INT</span>          <span style="color: #fb4933;">NOT</span> <span style="color: #fb4933;">NULL</span>,
  <span style="color: #fb4933;">PRIMARY</span> <span style="color: #fb4933;">KEY</span> <span style="color: #8ec07c;">(</span>Pnumber<span style="color: #8ec07c;">)</span>,
  <span style="color: #fb4933;">UNIQUE</span> <span style="color: #8ec07c;">(</span>Pname<span style="color: #8ec07c;">)</span>,
  <span style="color: #fb4933;">FOREIGN</span> <span style="color: #fb4933;">KEY</span> <span style="color: #8ec07c;">(</span>Dnum<span style="color: #8ec07c;">)</span> <span style="color: #fb4933;">REFERENCES</span> DEPARTMENT <span style="color: #8ec07c;">(</span>Dnumber<span style="color: #8ec07c;">)</span> <span style="color: #b16286;">)</span>;
<span style="color: #fb4933;">CREATE</span> <span style="color: #fb4933;">TABLE</span> <span style="color: #fabd2f;">WORKS_ON</span>
 <span style="color: #b16286;">(</span>Essn  <span style="color: #d3869b;">CHAR</span><span style="color: #8ec07c;">(</span>9<span style="color: #8ec07c;">)</span>      <span style="color: #fb4933;">NOT</span> <span style="color: #fb4933;">NULL</span>,
  Pno   <span style="color: #d3869b;">INT</span>          <span style="color: #fb4933;">NOT</span> <span style="color: #fb4933;">NULL</span>,
  Hours <span style="color: #d3869b;">DECIMAL</span><span style="color: #8ec07c;">(</span>3,1<span style="color: #8ec07c;">)</span> <span style="color: #fb4933;">NOT</span> <span style="color: #fb4933;">NULL</span>,
  <span style="color: #fb4933;">PRIMARY</span> <span style="color: #fb4933;">KEY</span> <span style="color: #8ec07c;">(</span>Essn, Pno<span style="color: #8ec07c;">)</span>,
  <span style="color: #fb4933;">FOREIGN</span> <span style="color: #fb4933;">KEY</span> <span style="color: #8ec07c;">(</span>Essn<span style="color: #8ec07c;">)</span> <span style="color: #fb4933;">REFERENCES</span> EMPLOYEE <span style="color: #8ec07c;">(</span>Ssn<span style="color: #8ec07c;">)</span>,
  <span style="color: #fb4933;">FOREIGN</span> <span style="color: #fb4933;">KEY</span> <span style="color: #8ec07c;">(</span>Pno<span style="color: #8ec07c;">)</span> <span style="color: #fb4933;">REFERENCES</span> PROJECT <span style="color: #8ec07c;">(</span>Pnumber<span style="color: #8ec07c;">)</span> <span style="color: #b16286;">)</span>;
<span style="color: #fb4933;">CREATE</span> <span style="color: #fb4933;">TABLE</span> <span style="color: #fabd2f;">DEPENDENT</span>
 <span style="color: #b16286;">(</span>Essn           <span style="color: #d3869b;">CHAR</span><span style="color: #8ec07c;">(</span>9<span style="color: #8ec07c;">)</span>     <span style="color: #fb4933;">NOT</span> <span style="color: #fb4933;">NULL</span>,
  Dependent_name <span style="color: #d3869b;">VARCHAR</span><span style="color: #8ec07c;">(</span>15<span style="color: #8ec07c;">)</span> <span style="color: #fb4933;">NOT</span> <span style="color: #fb4933;">NULL</span>,
  Sex            <span style="color: #d3869b;">CHAR</span>,
  Bdate          <span style="color: #d3869b;">DATE</span>,
  Relationship   <span style="color: #d3869b;">VARCHAR</span><span style="color: #8ec07c;">(</span>8<span style="color: #8ec07c;">)</span>,
  <span style="color: #fb4933;">PRIMARY</span> <span style="color: #fb4933;">KEY</span> <span style="color: #8ec07c;">(</span>Essn, Dependent_name<span style="color: #8ec07c;">)</span>,
  <span style="color: #fb4933;">FOREIGN</span> <span style="color: #fb4933;">KEY</span> <span style="color: #8ec07c;">(</span>Essn<span style="color: #8ec07c;">)</span> <span style="color: #fb4933;">REFERENCES</span> EMPLOYEE<span style="color: #8ec07c;">(</span>Ssn<span style="color: #8ec07c;">)</span> <span style="color: #b16286;">)</span>;
</pre>
</div>

</div>
</div>
</div>
<div id="outline-container-org9879c7b" class="outline-2">
<h2 id="org9879c7b">select-from-where</h2>
<div class="outline-text-2" id="text-org9879c7b">
<div test="test" class="fancy-block dummy" data-before="" data-after="&lt;p&gt;
(Ramez Elmasri, Shamkant B. Navathe, 2015 chapter 6.3.1 the select-from-where structure of basic sql queries)&lt;/p&gt;
" id="def-inr-prod" data-id="def-inr-prod">
<p>
the basic form of the <i>SELECT</i> statement, sometimes called a <i>mapping</i> or a <i>select-from-where</i> block, is formed of the three clauses <i>SELECT</i>, <i>FROM</i>, and <i>WHERE</i> and has the following form:
</p>
<div class="org-src-container" data-language="sql">
<pre class="src src-sql"><span style="color: #fb4933;">SELECT</span> &lt;attribute list&gt;
<span style="color: #fb4933;">FROM</span>   &lt;<span style="color: #fb4933;">table</span> list&gt;
<span style="color: #fb4933;">WHERE</span>  &lt;condition&gt;;
</pre>
</div>

<p>
where
</p>
<ul class="org-ul">
<li><code>&lt;attribute list&gt;</code> is a list of attribute names whose values are to be retrieved by the query.</li>
<li><code>&lt;table list&gt;</code> is a list of the relation names required to process the query.</li>
<li><code>&lt;condition&gt;</code> is a conditional expression that identifies the tuples to be retrieved by the query.</li>
</ul>

</div>
</div>
</div>
<div id="outline-container-org38cb524" class="outline-2">
<h2 id="org38cb524">ordering of query results</h2>
<div class="outline-text-2" id="text-org38cb524">
<p>
the order by operator
</p>
</div>
</div>
<div id="outline-container-orged55caf" class="outline-2">
<h2 id="orged55caf">alter table</h2>
</div>
<div id="outline-container-org5bb8e77" class="outline-2">
<h2 id="org5bb8e77">update</h2>
</div>
</div>
</body>
</html>
